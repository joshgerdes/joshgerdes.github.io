<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Founder of Lost Leaf Studio, developer, consultant, cyclist, soccer fan, nature enthusiast and lover of beer."><meta name=author content="Josh Gerdes"><meta name=twitter:card content="summary"><meta name=twitter:url content="https://joshgerdes.com/"><meta name=twitter:title content="Josh Gerdes"><meta name=twitter:description content="Founder of Lost Leaf Studio, developer, consultant, cyclist, soccer fan, nature enthusiast and lover of beer."><meta property="og:type" content="article"><meta property="og:title" content="Josh Gerdes"><meta property="og:description" content="Founder of Lost Leaf Studio, developer, consultant, cyclist, soccer fan, nature enthusiast and lover of beer."><meta property="og:url" content="https://joshgerdes.com/"><meta property="og:site_name" content="Josh Gerdes"><link rel=apple-touch-icon sizes=57x57 href=/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/images/favicons/manifest.json><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#ffc40d"><meta name=msapplication-TileImage content="/images/favicons/mstile-144x144.png"><base href=https://joshgerdes.com/><title>How to deploy a Hugo project to GitHub Pages with GitHub Actions | Josh Gerdes</title><meta name=title content="How to deploy a Hugo project to GitHub Pages with GitHub Actions | Josh Gerdes"><link rel=canonical href=https://joshgerdes.com/2019/09/how-to-deploy-a-hugo-project-to-github-pages-with-github-actions/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400&display=swap"><link rel=stylesheet href=/css/main.css></head><body><main><header><h1><a href=https://joshgerdes.com/>Josh Gerdes</a></h1><section><a href=https://github.com/joshgerdes title=GitHub rel="noopener noreferrer" target=_blank><i data-feather=github></i></a><a href=https://twitter.com/joshgerdes title=Twitter rel="noopener noreferrer" target=_blank><i data-feather=twitter></i></a><a href=https://instagram.com/joshgerdes title=Instagram rel="noopener noreferrer" target=_blank><i data-feather=instagram></i></a><a href=https://linkedin.com/in/joshgerdes title=LinkedIn rel="noopener noreferrer" target=_blank><i data-feather=linkedin></i></a><a href=mailto:josh@joshgerdes.com title="Email Me" rel="noopener noreferrer" target=_blank><i data-feather=mail></i></a><a href=/index.xml title=RSS target=_blank><i data-feather=rss></i></a></section></header><section class=content><article><header><h2><a href=/2019/09/how-to-deploy-a-hugo-project-to-github-pages-with-github-actions/>How to deploy a Hugo project to GitHub Pages with GitHub Actions</a></h2><section><time datetime="Sep 9, 19000">Sep 19, 2019</time><section class=tags><a href=https://joshgerdes.com/tags/hugo/>hugo</a>
<a href=https://joshgerdes.com/tags/github/>github</a></section class="tags"></section></header><section><p>Over the years I have tried many static site generators to help manage my personal site and other projects.</p><p>Recently, I decided I wanted to find a setup that utilized github pages and did not rely on any local tooling for building or deploying my site.</p><p>I really liked how easy it was to use <a href=https://gohugo.io/>Hugo</a> and once I found this great little project <a href=https://github.com/peaceiris/actions-hugo>GitHub Actions for Hugo</a> I knew I had a solution.</p><p>Here are some instructions detailing how I setup my site. You can find more details in the <a href=https://github.com/peaceiris/actions-hugo#getting-started>Getting Started</a> section of the <a href=https://github.com/peaceiris/actions-hugo>GitHub Actions for Hugo</a> project.</p><h2 id=1-generate-a-ssh-deploy-key>1. Generate a SSH deploy key</h2><p>Create your deploy key with the following command:</p><pre><code>ssh-keygen -t rsa -b 4096 -C &quot;$(git config user.email)&quot; -f gh-pages -N &quot;&quot;
</code></pre><p>This will generate 2 files:</p><ul><li>gh-pages.pub (public key)</li><li>gh-pages (private key)</li></ul><p>Next, go to the github repository <strong>Settings</strong> and do the following:</p><ul><li>Go to <strong>Deploy Keys</strong> and add your public key with <code>Allow write access</code> checked</li><li>Go to <strong>Secrets</strong> and add your private key as <code>ACTIONS_DEPLOY_KEY</code></li></ul><h2 id=2-create-a-source-branch>2. Create a source branch</h2><p>Create a <code>source</code> branch in your repository. In the setup you will have 2 branches <code>master</code> and <code>source</code> where <code>source</code> contains all of your source files and <code>master</code> is the location where your built site files are deployed and served up.</p><h2 id=3-create-a-workflow>3. Create a workflow</h2><p>Go to the github repository <strong>Settings</strong> and under <strong>Actions</strong> turn on <code>Enable local and third party Actions for this repository</code>.</p><p>Next, in the new <code>source</code> branch create the following file: <code>.github/workflows/main.yml</code>.</p><p>Here is an example that I am using for this site:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#66d9ef>name</span>: github pages

<span style=color:#66d9ef>on</span>:
  <span style=color:#66d9ef>push</span>:
    <span style=color:#66d9ef>branches</span>:
      - source

<span style=color:#66d9ef>jobs</span>:
  <span style=color:#66d9ef>build-deploy</span>:
    <span style=color:#66d9ef>runs-on</span>: ubuntu<span style=color:#ae81ff>-18.04</span>
    <span style=color:#66d9ef>steps</span>:
      - <span style=color:#66d9ef>uses</span>: actions/checkout@master

      - <span style=color:#66d9ef>name</span>: Setup Hugo
        <span style=color:#66d9ef>uses</span>: peaceiris/actions-hugo@v2
        <span style=color:#66d9ef>with</span>:
          <span style=color:#66d9ef>hugo-version</span>: <span style=color:#e6db74>&#34;latest&#34;</span>

      - <span style=color:#66d9ef>name</span>: Build
        <span style=color:#66d9ef>run</span>: hugo --gc --minify --cleanDestinationDir
      
      - <span style=color:#66d9ef>name</span>: Deploy
        <span style=color:#66d9ef>uses</span>: peaceiris/actions-gh-pages@v2
        <span style=color:#66d9ef>env</span>:
          <span style=color:#66d9ef>ACTIONS_DEPLOY_KEY</span>: ${{ secrets.ACTIONS_DEPLOY_KEY }}
          <span style=color:#66d9ef>PUBLISH_BRANCH</span>: master
          <span style=color:#66d9ef>PUBLISH_DIR</span>: ./public
</code></pre></div><h2 id=4-push-your-hugo-project>4. Push your Hugo project</h2><p>Now you can commit and push your hugo project to the <code>source</code> branch of your repository. This should trigger the new workflow for the new action which will build and deploy your site to the <code>master</code> branch.</p></section></article></section><footer><nav><a href=javascript:void(0); id=theme-toggle title="Toggle theme"><i class=sunset data-feather=sunset></i><i class=sunrise data-feather=sunrise></i></a><a href=/posts/>Posts</a>
<a href=/tags/>Tags</a></ul></nav><section>&copy; 2020 Josh Gerdes. All rights reserved.</section></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.24.1/feather.min.js></script><script src=/js/main.js></script></main></body></html>