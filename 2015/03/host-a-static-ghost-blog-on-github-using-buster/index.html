<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Founder of Lost Leaf Studio, developer, consultant, cyclist, soccer fan, nature enthusiast and lover of beer."><meta name=author content="Josh Gerdes"><meta name=twitter:card content="summary"><meta name=twitter:url content="https://joshgerdes.com/"><meta name=twitter:title content="Josh Gerdes"><meta name=twitter:description content="Founder of Lost Leaf Studio, developer, consultant, cyclist, soccer fan, nature enthusiast and lover of beer."><meta property="og:type" content="article"><meta property="og:title" content="Josh Gerdes"><meta property="og:description" content="Founder of Lost Leaf Studio, developer, consultant, cyclist, soccer fan, nature enthusiast and lover of beer."><meta property="og:url" content="https://joshgerdes.com/"><meta property="og:site_name" content="Josh Gerdes"><link rel=apple-touch-icon sizes=57x57 href=/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/images/favicons/manifest.json><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#ffc40d"><meta name=msapplication-TileImage content="/images/favicons/mstile-144x144.png"><base href=https://joshgerdes.com/><title>Host a static Ghost blog on GitHub using Buster | Josh Gerdes</title><meta name=title content="Host a static Ghost blog on GitHub using Buster | Josh Gerdes"><link rel=canonical href=https://joshgerdes.com/2015/03/host-a-static-ghost-blog-on-github-using-buster/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400&display=swap"><link rel=stylesheet href=/css/main.css></head><body><main><header><h1><a href=https://joshgerdes.com/>Josh Gerdes</a></h1><section><a href=https://github.com/joshgerdes title=GitHub rel="noopener noreferrer" target=_blank><i data-feather=github></i></a><a href=https://twitter.com/joshgerdes title=Twitter rel="noopener noreferrer" target=_blank><i data-feather=twitter></i></a><a href=https://instagram.com/joshgerdes title=Instagram rel="noopener noreferrer" target=_blank><i data-feather=instagram></i></a><a href=https://linkedin.com/in/joshgerdes title=LinkedIn rel="noopener noreferrer" target=_blank><i data-feather=linkedin></i></a><a href=mailto:josh@joshgerdes.com title="Email Me" rel="noopener noreferrer" target=_blank><i data-feather=mail></i></a><a href=/index.xml title=RSS target=_blank><i data-feather=rss></i></a></section></header><section class=content><article><header><h2><a href=/2015/03/host-a-static-ghost-blog-on-github-using-buster/>Host a static Ghost blog on GitHub using Buster</a></h2><section><time datetime="Mar 3, 12000">Mar 12, 2015</time><section class=tags><a href=https://joshgerdes.com/tags/ghost/>ghost</a>
<a href=https://joshgerdes.com/tags/buster/>buster</a></section class="tags"></section></header><section><p>I have really enjoyed the simplicity of the <a href=https://github.com/tryghost/Ghost>Ghost</a> blogging system and wanted to use it for my personal site. But I also enjoyed the ease of hosting with <a href=https://pages.github.com>GitHub Pages</a> so I needed to find a way to generate a static version of a Ghost blog. Luckily someone already had a handy little tool for the job called <a href=https://github.com/axitkhurana/buster>Buster</a>.</p><h3 id=installing-buster>Installing Buster</h3><p>Details on Buster can be found <a href=https://github.com/axitkhurana/buster>here</a>. Basically, you need to install <strong>wget</strong> and <strong>git</strong> with <a href=http://brew.sh/>brew</a> (if they are not already installed on your system) then install Buster with <a href=https://pip.pypa.io>pip</a>. Just run the following commands:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install wget
brew install git
pip install buster
</code></pre></div><p>To test the install of Buster run the following:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>buster --version
</code></pre></div><p>You should see current version display (i.e. <code>0.1.3</code>).</p><h3 id=setting-up-ghost>Setting up Ghost</h3><p>First off you need to download of a copy of the latest version of Ghost found <a href=https://github.com/TryGhost/Ghost/releases>here</a>. Extract the archive and open a console and go to the newly created directory and run the following:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install --production
npm start
</code></pre></div><p>Then visit http://127.0.0.1:2368/ghost in a browser and go through the setup screens to create an admin account and start using ghost.</p><h3 id=setting-up-buster>Setting up Buster</h3><p>In a new console window go to the directory where ghost is installed and type the following to setup buster:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>buster setup
</code></pre></div><p>Just follow the prompts and provide the data needed. Please view the README on the <a href=https://github.com/axitkhurana/buster>Buster GitHub page</a> for more details on how to use Buster.</p><h3 id=generating-static-pages-with-buster>Generating static pages with Buster</h3><p>At the time of writing this Buster had some issues with missing the generation of some needed files and creating some files with incorrect URL reference in page. I created this script as a workaround for those issue. So create a file (I called it <strong>build-static.sh</strong>) and be sure and change out the references to <a href=http://joshgerdes.com>http://joshgerdes.com</a> and replace them with your remote site URL.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#!/bin/bash
</span><span style=color:#75715e></span>
<span style=color:#75715e># Generate static files with buster</span>
buster generate --domain<span style=color:#f92672>=</span>http://127.0.0.1:2368  

<span style=color:#75715e># Copy sitemap files</span>
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span style=color:#f92672>=</span>unix http://127.0.0.1:2368/sitemap.xsl
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span style=color:#f92672>=</span>unix http://127.0.0.1:2368/sitemap.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span style=color:#f92672>=</span>unix http://localhost:2368/sitemap-pages.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span style=color:#f92672>=</span>unix http://localhost:2368/sitemap-posts.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span style=color:#f92672>=</span>unix http://localhost:2368/sitemap-authors.xml
wget --convert-links --page-requisites --no-parent --directory-prefix static --no-host-directories --restrict-file-name<span style=color:#f92672>=</span>unix http://localhost:2368/sitemap-tags.xml

<span style=color:#75715e># Replace urls that were missed by buster</span>
find static/* -name robots.txt -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#http://localhost:2368#http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>
find static/* -name *.xsl -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#http://localhost:2368#http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>
find static/* -name *.xml -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#loc&gt;http://localhost:2368#loc&gt;http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>
find static/* -name *.html -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#u=http://localhost:2368#u=http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>  
find static/* -name *.html -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#url=http://localhost:2368#url=http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>  
find static/* -name *.html -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#href=&#34;http://localhost:2368#href=&#34;http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>  
find static/* -name *.html -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#src=&#34;http://localhost:2368#src=&#34;http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>  
find static/* -name *.html -type f -exec sed -i <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#e6db74>&#39;s#link&gt;http://localhost:2368#link&gt;http://joshgerdes.com#g&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span> 

<span style=color:#75715e># Add CNAME file for github pages</span>
buster add-domain joshgerdes.com

<span style=color:#75715e># Copy files that were missed by buster</span>
cp humans.txt static/humans.txt
cp -R content/images static/content
</code></pre></div><p>Now give the newly created file execute permissions</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chmod +x ./build-static.sh
</code></pre></div><p>Then just run in the directory where you installed ghost:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./build-static.sh
</code></pre></div><p>This should generate static files under a subdirectory called <code>/static</code> which should be connected to your GitHub repository.</p><p><em><strong>NOTE</strong>: I also forked the Buster repository and made changes to the project to fix the broken URLs and add the sitemap files to the static output. So if you want to use my version of Buster it can be found <a href=https://github.com/joshgerdes/buster>here</a>. Hopefully my pull request will be accepted shortly and it will become part of the main script.</em></p><h3 id=previewing-static-pages>Previewing static pages</h3><p>You can preview the static pages by running the following command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>buster preview
</code></pre></div><p>Then visit http://localhost:9000 in a browser to view the static pages locally.</p><h3 id=deploying-static-pages-to-github>Deploying static pages to GitHub</h3><p>If you like what you see, you can push those changes to your GitHub repository using normal commands or type the following command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>buster deploy
</code></pre></div><p>With luck you should have a nice static version of your site published to GitHub to enjoy.</p></section></article></section><footer><nav><a href=javascript:void(0); id=theme-toggle title="Toggle theme"><i class=sunset data-feather=sunset></i><i class=sunrise data-feather=sunrise></i></a><a href=/posts/>Posts</a>
<a href=/tags/>Tags</a></ul></nav><section>&copy; 2020 Josh Gerdes. All rights reserved.</section></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.24.1/feather.min.js></script><script src=/js/main.js></script></main></body></html>